<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Image Analysis Flask API</title>
    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
      crossorigin="anonymous"
    />
    <link
      rel="shortcut icon"
      href="https://cdn.icon-icons.com/icons2/3913/PNG/512/flask_logo_icon_248540.png"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>

  <body>
    <main id="container">
      <div class="container2">
        <img
          class="logo-ku"
          src="{{ url_for('static', filename='Khulna_University.png') }}"
          alt="No Image Found"
        />
        <div class="col-m6 offset-m3">
          <h1 class="title text-center">Object Detection using Yolov8</h1>
          <div class="text-left">
            <h3>Name: Md. Nazmul Hossain Shishir</h3>
            <h3>ID: MSc. 240205</h3>
            <h3>Computer Science and Engineering</h3>
            <h3>Khulna University</h3>
            <h3>Course: Advanced Computer Vision</h3>
            <h3><i>Course Code: CSE 5133</i> </h3>
          </div>
        </div>
      </div>
      <form
        id="upload-form"
        class="upl-container"
        method="POST"
        action="predict"
        enctype="multipart/form-data"
      >
        <div class="uploadOuter">
          <span class="dragBox">
            Drag and drop file here
            <input
              type="file"
              onChange="dragNdrop(event)"
              name="myfile"
              ondragover="drag()"
              ondrop="drop()"
              id="myfile"
            />
            <!-- id="myfile" accept="video/*,image/*" /> -->
          </span>
          <div style="text-align: center">
            <strong>OR</strong>
            <label for="myfile" class="btn btn-primary">Select file</label>
          </div>
        </div>

        <div class="form-group">
          <div id="progress-container" class="progress">
            <div
              id="progress-bar"
              class="progress-bar progress-bar-striped progress-bar-animated"
              role="progressbar"
              aria-valuenow="75"
              aria-valuemin="0"
              aria-valuemax="100"
              style="width: 75%"
            ></div>
          </div>
        </div>

        <div id="preview">
          <p id="preview-text"></p>
          <img id="preview-img" src="" alt="" />
        </div>

        <input
          type="submit"
          id="upload-btn"
          value="Upload file"
          class="btn btn-primary"
        />
      </form>
    </main>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
      AWS.config.update({});
    </script>
    <script>
      "use strict";
      const uploadBtn = document.getElementById("upload-btn");
      var fileName,
        preview = document.getElementById("preview"),
        previewImg = document.getElementById("preview-img"),
        previewtext = document.getElementById("preview-text");
      function dragNdrop(event) {
        let file = event.target.files[0];
        if (!file) return;
        fileName = URL.createObjectURL(file);
        previewImg.setAttribute("src", fileName);
        uploadBtn.style.display = "block";
        previewtext.innerHTML = `File selected: <b>${file.name}</b>`;
      }
      function drag() {
        document.getElementById("myfile").parentNode.className =
          "draging dragBox";
      }
      function drop() {
        document.getElementById("myfile").parentNode.className = "dragBox";
      }
      function handleUpload() {
        uploadBtn.disabled = true;
        const local_server_url = `${window.location.protocol}//${window.location.hostname}:${window.location.port}`;
      }
    </script>
  </body>
</html>
